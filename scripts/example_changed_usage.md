# Changed æ–‡ä»¶å¤¹æ–°ç¿»è¯‘åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## ğŸ¯ åŠŸèƒ½è¯´æ˜

å½“æ¸¸æˆå†…å®¹æ›´æ–°å¯¼è‡´æ—¥æ–‡åŸæ–‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹è¿™äº›å˜åŒ–å¹¶ç”Ÿæˆ CSV æ–‡ä»¶ä¿å­˜åˆ° `pretranslate_todo/todo/changed/` æ–‡ä»¶å¤¹ä¸­ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

CSV æ–‡ä»¶æ ¼å¼ï¼š
```
æ—§å€¼,æ–°å€¼,æ—§ç¿»è¯‘,æ–°ç¿»è¯‘
åŸæ¥çš„æ—¥æ–‡å†…å®¹,æ›´æ–°åçš„æ—¥æ–‡å†…å®¹,åŸæ¥çš„ä¸­æ–‡ç¿»è¯‘,
```

## ğŸ”§ ä½¿ç”¨æµç¨‹

### 1. ç”Ÿæˆå˜åŒ–æ£€æµ‹æ–‡ä»¶
```bash
make gen-todo
# æˆ–è€…
python scripts/pretranslate_process.py --gen_todo
```

### 2. ç¼–è¾‘ CSV æ–‡ä»¶
æ‰“å¼€ `pretranslate_todo/todo/changed/` æ–‡ä»¶å¤¹ä¸­çš„ CSV æ–‡ä»¶ï¼Œåœ¨"æ–°ç¿»è¯‘"åˆ—å¡«å…¥å¯¹åº”çš„ä¸­æ–‡ç¿»è¯‘ã€‚

ä¾‹å¦‚ï¼š
```csv
æ—§å€¼,æ–°å€¼,æ—§ç¿»è¯‘,æ–°ç¿»è¯‘
å¤ã„å€¤,æ–°ã—ã„å€¤,æ—§ç¿»è¯‘,æ–°çš„ç¿»è¯‘
ãƒ†ã‚¹ãƒˆ,ãƒ†ã‚¹ãƒˆæ›´æ–°,æµ‹è¯•,æµ‹è¯•æ›´æ–°
```

### 3. åº”ç”¨æ–°ç¿»è¯‘
```bash
make apply-changed
# æˆ–è€…
python scripts/pretranslate_process.py --apply_changed
```

### 4. ç»§ç»­åç»­æµç¨‹
åº”ç”¨å®Œæˆåï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œï¼š
```bash
make merge
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **CSV æ ¼å¼**ï¼šç¡®ä¿ CSV æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯é€—å·åˆ†éš”ç¬¦
2. **æ¢è¡Œç¬¦å¤„ç†**ï¼šæ–‡æœ¬ä¸­çš„çœŸå®æ¢è¡Œç¬¦ä¼šè¢«è½¬æ¢ä¸º `\n`ï¼Œç¨‹åºä¼šè‡ªåŠ¨å¤„ç†
3. **ç©ºç¿»è¯‘è·³è¿‡**ï¼šå¦‚æœ"æ–°ç¿»è¯‘"åˆ—ä¸ºç©ºï¼Œè¯¥è¡Œä¼šè¢«è·³è¿‡
4. **é”®åŒ¹é…**ï¼šç¨‹åºé€šè¿‡"æ–°å€¼"åœ¨ temp_key_jp ä¸­æŸ¥æ‰¾å¯¹åº”çš„é”®è¿›è¡Œæ›´æ–°

## ğŸ¯ å®Œæ•´å·¥ä½œæµç¨‹

```bash
# 1. å¤‡ä»½å½“å‰çŠ¶æ€
make backup

# 2. æ›´æ–°æ¸¸æˆæ•°æ®
make update

# 3. ç”Ÿæˆ todo æ–‡ä»¶ï¼ˆåŒ…æ‹¬å˜åŒ–æ£€æµ‹ï¼‰
make gen-todo

# 4. ç¼–è¾‘ changed æ–‡ä»¶å¤¹ä¸­çš„ CSV æ–‡ä»¶ï¼Œå¡«å…¥æ–°ç¿»è¯‘

# 5. åº”ç”¨æ–°ç¿»è¯‘
make apply-changed

# 6. åˆå¹¶å¹¶ç”Ÿæˆæœ€ç»ˆæ–‡ä»¶
make merge
```

## ğŸ” è¾“å‡ºç¤ºä¾‹

æ‰§è¡Œ `make apply-changed` æ—¶çš„è¾“å‡ºï¼š
```
ğŸ”„ å¼€å§‹å¤„ç† changed æ–‡ä»¶å¤¹ä¸­çš„ç¿»è¯‘æ›´æ–°...

ğŸ“„ å¤„ç†æ–‡ä»¶: Character.csv
âœ… æ›´æ–°ç¿»è¯‘: æ–°ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å... -> æ–°è§’è‰²åç§°...
ğŸ’¾ å·²ä¿å­˜ 3 ä¸ªç¿»è¯‘æ›´æ–°åˆ° Character.json

ğŸ‰ å¤„ç†å®Œæˆï¼
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯ï¼š
   - å¤„ç†çš„æ–‡ä»¶æ•°: 1
   - æ›´æ–°çš„ç¿»è¯‘æ•°: 3

ğŸ’¡ æç¤ºï¼šç¿»è¯‘å·²æ›´æ–°åˆ°ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼š
   - temp_key_cn: ./pretranslate_todo/temp_key_cn
   - jp_cn: ./pretranslate_todo/jp_cn
   ä½ å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„åˆå¹¶æµç¨‹
```